/*owl carousel*/
$(document).ready(function ($) {

    var $shopSingle = $(".shop-big-images"),
        $shopThumb = $(".shop-thumbs"),
        $sync1 = $(".big-images"),
        $sync2 = $(".thumbs"),
        flag = false,
        duration = 300;


    $('#info').on('shown.bs.modal', function (event) {

        $('.modal-backdrop').css("z-index", "1");
        $('.modal.fade').css("background", "rgba(0,0,0,0.9)");
        
        $shopSingle.owlCarousel({
            items: 1,
            margin: 10,
            nav: false,
            dots: true,
        })
        .on('changed.owl.carousel', function (e) {
            if (!flag) {
                flag = true;
                $shopThumb.trigger('to.owl.carousel', [e.item.index, duration, true]);
                flag = false;
            }
        });

        $shopThumb.owlCarousel({
            margin: 20,
            items: 6,
            nav: false,
            center: true,
            dots: false,
        })
        .on('click', '.owl-item', function () {
            $shopSingle.trigger('to.owl.carousel', [$(this).index(), duration, true]);

        })
        .on('changed.owl.carousel', function (e) {
            if (!flag) {
                flag = true;
                $shopSingle.trigger('to.owl.carousel', [e.item.index, duration, true]);
                flag = false;
            }
        });

    });

    $('#info').on('hidden.bs.modal', function (event) {
      owlCarousel.data('owlCarousel').destroy();
      owlCarousel.find('.owl-stage-outer').children().unwrap();
    });

    /*======================================================================*/

    $sync1.owlCarousel({
        items: 1,
        margin: 10,
        nav: false,
        dots: true,
    })
    .on('changed.owl.carousel', function (e) {
        if (!flag) {
            flag = true;
            $sync2.trigger('to.owl.carousel', [e.item.index, duration, true]);
            flag = false;
        }
    });

    $sync2.owlCarousel({
        margin: 20,
        items: 6,
        nav: false,
        center: true,
        dots: false,

    })
    .on('click', '.owl-item', function () {
        $sync1.trigger('to.owl.carousel', [$(this).index(), duration, true]);

    })
    .on('changed.owl.carousel', function (e) {
        if (!flag) {
            flag = true;
            $sync1.trigger('to.owl.carousel', [e.item.index, duration, true]);
            flag = false;
        }
    });

    if ($('#home').hasClass('page-title')){
        $('#pop').modal({
            show: 'true'
        });
        $('.modal-backdrop').css("z-index", "1");
        $('.modal.fade').css("background", "rgba(0,0,0,0.9)");
    }

    $('.parallax-mirror').css("z-index", "5");
});


$(function () {
    /*side navigation*/
    $('a.trigger').click(function () {
        $('.wrapper, nav').toggleClass('active');
        $(this).toggleClass('active');
        $('header#topnav').toggleClass('NavShowMenu');
        $('#darkside').toggleClass('active');

        return false;
    });

    $('.wrapper').click(function () {
        $('.wrapper, nav, .trigger, #darkside').removeClass('active');
        $('header#topnav').removeClass('NavShowMenu');
    });

    /*dropdown selector isotope*/
    var $container = $('#works'),
        $select = $('#idfilters select');

    $container.isotope({
        itemSelector: '.work-item'
    });

    $select.change(function () {
        var filters = $(this).val();
        $('.container div').removeClass('active');
        $(filters).addClass('active');
        $container.isotope({
            filter: filters
        });
    });

    /*load-more IAS*/
    var ias = jQuery.ias({
      container:  '#work',
      item:       '.work-item',
      pagination: '#paging',
      next:       '.next',
    });
    ias.extension(new IASSpinnerExtension({
      src: "<?php echo base_url() ?>/assets/images/loading.gif",
    }));
    ias.extension(new IASTriggerExtension({
        text: 'Load More',
        html: '<div class="ias-trigger ias-trigger-next" style="text-align: center; cursor: pointer;"><a class="btn btn-color center-btn">{text}</a></div>'
    }));

    /*membership tab*/
    $('#login-form-link').click(function(e) {
        $("#login-form").delay(400).slideDown(400);
        $("#register-form").slideUp(400);
        $('#register-form-link').removeClass('active');
        $("#news-form").slideUp(400);
        $('#news-form-link').removeClass('active');
        $('#sscr').addClass('height100');
        $(this).addClass('active');
        e.preventDefault();
    });
    $('#register-form-link').click(function(e) {
        $("#register-form").delay(400).slideDown(400);
        $("#login-form").slideUp(400);
        $('#login-form-link').removeClass('active');
        $("#news-form").slideUp(400);
        $('#news-form-link').removeClass('active');
        $('#sscr').addClass('height100');
        $(this).addClass('active');
        e.preventDefault();
    }); $('#news-form-link').click(function(e) {
        $("#news-form").delay(400).slideDown(400);
        $("#login-form").slideUp(400);
        $('#login-form-link').removeClass('active');
        $("#register-form").slideUp(400);
        $('#register-form-link').removeClass('active');
        $('#sscr').addClass('height100');
        $(this).addClass('active');
        e.preventDefault();
    });

    /*add more form*/
    var car = $('.form-car');


    car.addClass('one');
    $('#less-form').on('click', function(){
        if($('.one')[0] || $('.two')[0]){
            $('.two').remove();
        }
        $(this).hide();
        $('#more-form').show();
    });
   $('#more-form').on('click', function(){
        $('.one').clone().addClass('two').appendTo('.form-car-after');
        $(this).hide();
        $('#more-form-2').fadeIn();
    });

    $('#more-form-2').on('click', function(){
        $('.two').clone().appendTo('.form-car-after');
        $(this).hide();
        $('#less-form').fadeIn();
    });

});
